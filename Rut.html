<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Validaci칩n de RUT</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <h2 class="text-center">Validaci칩n de RUT</h2>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="rut" class="form-label">Ingrese su RUT (sin puntos, con guion)</label>
                <input type="text" class="form-control" id="rut" placeholder="12345678-9">
            </div>
            <button class="btn btn-primary w-100" onclick="validarRUT()">Validar</button>
            <a href="index.html"><button class="btn btn-danger mt-3 w-100">Volver</button></a>
            <p id="resultado" class="mt-3 text-center"></p>
        </div>
    </div>
</div>

<script>
    function validarRUT() {
        let rut = document.getElementById("rut").value;
        if (!/^[0-9]+-[0-9Kk]$/.test(rut)) {
            mostrarResultado("Formato incorrecto", "text-danger");
            return;
        }

        let [numero, dv] = rut.split("-");
        let dvCalculado = calcularDV(numero);

        if (dv.toUpperCase() === dvCalculado) {
            mostrarResultado("RUT v치lido", "text-success");
        } else {
            mostrarResultado("RUT inv치lido", "text-danger");
        }
    }

    function calcularDV(numero) {
        let suma = 0, multiplicador = 2;
        for (let i = numero.length - 1; i >= 0; i--) {
            suma += multiplicador * parseInt(numero[i]);
            multiplicador = multiplicador < 7 ? multiplicador + 1 : 2;
        }
        let resto = suma % 11;
        let dv = 11 - resto;
        return dv === 10 ? "K" : dv === 11 ? "0" : dv.toString();
    }

    function mostrarResultado(mensaje, clase) {
        let resultado = document.getElementById("resultado");
        resultado.textContent = mensaje;
        resultado.className = clase;
    }
</script>

</body>
</html>